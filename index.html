<!DOCTYPE html>
<html>
    <script>
	var rules=[ 
"1. [b]Umbras[/b]. They are of arche type nightmare (see evocation card). They are assigned to a mage (max. 1 per evocation slot) and not summoned. Once assigned, they are owned by the Black Rose. Effects allow to take temporary control over them. They are still evocations. They become activated first in the evocation phase. Upon defeat (step 2) of a mage, assigned evocations get removed. Summoned evocations remain in play though.",

"2. [b]Alchemy, elements and *[/b]. The enhancement effect on a spell can only be resolved, if [b]previously revealed[/b] spells on the mage‘s board show the appropriate symbols. The spell that is being resolved cannot contribute to these symbols. Also the element * counts as all elements all the time. It is NOT like in BRW that once you use it you have to turn it into a specific element. An effect requiring a specific element can always target *. This is why a mage with a personal spell providing the * element combines so well with Alchemy.",

"3. [b]Avatar[/b]. When playing with an Avatar, you must use the Avatar event deck, not the standard event deck. During cleanup phase, you put one cube on one jinx on an Avatar and you remove one evocation assigned to the Avatar. An Avatar is immune to Black Rose damage and so are its evocations. You can assign an Umbra on an Avatar, but it will not inflict damage. If an Avatar‘s command card asks you to move the Avatar without priority, it is the crown holders choice.",

"4. [b]Remove[/b]. Remove-effects from school spells do only work on non-forgotten (see arche type on evocation card) evocations with a [b]health value of 3[/b] or less, as printed onthe evocation card. Damage on the evocation does not change the health value. With certain upgrades you can raise the health value. When removing evocations [b]owned[/b] by you, this limitation does NOT apply. If a forgotten spell has the remove clause, it may be applied to [b]all[/b] evocations independent from their health value (unless stated otherwise in the effect).",

"5. [b]Evocations[/b]. Evocation damage is [b]not[/b] considered to be mage damage. It will not trigger traps which require damage inflicted by a mage.",

"6. [b]Quests[/b]. When you draw and keep a new quest card it becomes an ACTIVE quest. All ACTIVE quest cards are placed face down on the left hand side of the mage board next to the active quest symbol. Beneath the title of the quest you find a task to be fulfilled, advancing the quest. If there are cube slots available, that many repetitions are required (tracked by placing cubes in those slots), otherwise fulfilling the task one time is sufficient to COMPLETE the quest. When you fulfill the task the first time, the quest card is revealed. When COMPLETED, return any cubes on the quest card to your reserve, place the quest card to the right of the mage board next to the completed/solved quest symbols and now it is considered COMPLETED. Every COMPLETED spell can become SOLVED if you choose to do so DURING ONE OF [b]YOUR[/b] MAGE ACTIVATIONS (before or after you take an action, not during an action). In that case, you resolve the quest effect on the lower part of the COMPLETED quest card and take the power points on the lower right corner of the quest card. Then you flip the quest card face down. Now the quest and the quest card are considered to be SOLVED. Some [b]game effects can also solve ACTIVE or COMPLETED quests[/b]. In that case only receive the power points, but do not resolve the quest effect. The [b]quest limit[/b] on your mage card applies to ACTIVE and COMPLETED quests separately, but [b]only[/b] when checked during the Black Rose phase. ",

"7. [b]Quests and the Black Rose[/b]. The Black Rose only gains power points for quests which are discarded by players choice (optional, step 4) in the Black Rose phase, [b]not[/b] for discarding due to exceeding the quest limit (step 6). The Black Rose also gains power points, if an effect lets it draw a quest. Quest from moon 1: 1pp, from moon 2: 2pp, from moon 3: 3pp. Only the quests which grant power points to the Black Rose go to the Event Board Quest Slot.",

"8. [b]Immunity[/b]. A mage and their evocations are immune to damage [b]inflicted[/b] oder [b]converted[/b] by them. The Avatar and its evocations are also immune to Black Rose damage.",

"9. [b]Target Mage or Model[/b]. If one of your spells/effects has the [b]mage or model icon[/b] as target, this EXCLUDES your mage (self).",

"10. [b]Avatar and evocation activation[/b]. The Avatar is considered to be a mage. Therefore, the evocations it owns are activated in play order among the mages in the evocation phase. The activation of the Black Rose‘s evocations at the beginning of this phase only refers to evocations owned by the Black Rose, like of arche type Nightmare (Umbras).",
"11. [b]Activation (mage)[/b]. During the action phase, each mage gets [b]at least 2 activations[/b] and usually 4 to 6 actions. In every activation, you [b]must[/b] take either 1 or 2 actions. Only if there is no action available, you can and must pass. After players have done their first activation in turn order, they will take their second and so on until all mages have passed.",

"12. [b]Ranking for points[/b]. If you are part of a ranking for defeat, rebuilding rooms or game and ranking of trophies or quests, because you have [b]at least 1[/b] according item (cube, trophy, quests) in the ranking, you will ALWAYS get 1 power point. A tie subtracts 1pp, but the result can NEVER be lower than 1.",

"13. [b]Discarding a forgotten spell[/b]. When you would discard a forgotten spell from your hand or mage board to your memories, it is taken out of the game. It can never be part of your memories. The only 3 valid places for forgotten spells are player's hand, mage board and forgotten deck. Forgotten cards going to somewhere else are removed from the game.",

"14. [b]First player[/b]. The crown holder becomes the first player at the beginning of EVERY phase. This can happen at the beginning of the study phase, the action phase and the evocation phase.",

"15. [b]Large evocation[/b]. You cannot own more than 1 evocation with a large base.",

"16. [b]Momentum[/b]. To use the momentum action (move up to 1), you must discard any [b]ready[/b] card of your choice from your mage board (you are free to chose Quick, I, II or III as long as it is ready; it is Independent from the casting order). Active spells (activated trap or protection spells, meaning unrevealed with a marker on it) cannot be used, since they are not ready anymore. ",

"17. [b]Upgrade limit[/b]. An evocation can only have 1 upgrade.",

"18. [b]Equipment limit[/b]. You cannot own two equipments with the same name.",

"19. [b]Druidic and Death schools[/b]. Both have been reworked by LMS. Get the new school cards from the LMS Web App Print & Play section: https://app.ludusmagnusstudio.com/pages/_BRWR/brwrPrinteplay.php#!",

"20. [b]Black Rose room[/b]. To pay the cost for the Black Rose room, you must discard cards [b]from your hand[/b] not the mage board.",

"21. [b]Spell targeting[/b]. A target for a spell is selected once the spell is [b]revealed[/b] and the center instability symbol (if any) has been applied to the room of the casting mage. It’s type must match the target icon on the spell and if there is also a number given with this target icon, the target must be [b]within [/b]this range and in [b]line of sight[/b]. The asterisk stands for everywhere in the Lodge, so no range and line of sight is applied. You cannot target mages in their cells. The 5-point star means special, so you find instructions in the spell‘s effect. Once a [b]valid target[/b] has been selected for the spell, it will remain the same for the spell‘s effect resolution. Even if the target is [b]moved[/b] out of range or line of sight gets lost, you still continue to resolve the effect against the chosen target, [b]unless[/b] the target is a mage and gets put into their cell during the effect resolution.<p> A word about LOS in the Rebirth rules. The Rebirth rules are not exact in this regard. In the old BRW rules there is a better wording and an example. LOS works in a straight line away from the caster. This line runs through the center of every intermediate room. Or in other words, LOS runs through the middle of the doors. Or LOS is like a star with you in the middle.",

"22. [b]Defeat interrupting an effect[/b]. Before interrupting an effect to resolve a defeat, execute the effect up to the end of the current sentence (next '.'). In general after the defeat you continue resolving [b]the interrupted effect[/b] with its next sentence of the SAME effect, but [b]consecutive effects of the interrupted action are stopped[/b]. Heh? What does that mean? A spell has only ONE effect (or one reverse effect). See page 15c core rules. If this effect is interrupted by a defeat, it continues resolution with the next sentence of the [b]same[/b] effect. See page 16 core rules how card effects are a series of sentences. The same is true for a rooms effect. Note that if after defeat interruption the continued effect provides a move, this move can get you out of your cell (not clear from the contradicting rules). A physical action is different, because it has a [b]series[/b] of effects (page 16) like 'Move 1.' then 'Move 1.' then 'Punch.'. Thus, after the defeat the consecutive effects are [b]not[/b] executed.",

"23. [b]Room activation[/b]. The rules are a bit vague about what exactly room activation is and how the timing works. If an effect allows you to activate a room (in most cases a physical action), then you activate the room. Then triggered effects like 'when X activates room Y' happen. Finally, you can resolve the effect of the room, [b]if[/b] you can pay for it. This means that you can activate a room, even if you cannot pay for its effect.",

"24. [b]Pay cost for an effect[/b]. You can only resolve an effect if you can pay its full cost. Cost can be for example 'lose 1pp' or 'discard x cards'. In most cases the effect says 'if you do, get this effect' but this is not used consistently. Sometimes or in the old BRW it would just say 'to do this effect'. Just act as if the clause 'if you do, get this effect' would be always there when a cost is involved. If cost is only part of one side of a players choice (or) and you cannot or do not pay the cost, you cannot choose that side of the or choice. In short, if you cannot pay the cost, you cannot reap the benefit tied to it.",

"25. [b]Resolving partial Effects[/b]. You must resolve [b]as much[/b] of an effect as you can. Even if a part of an effect cannot be resolved (for example no valid target, see also ‚ 'dummy target' in the rules/FAQ), you continue resolving the effect with its next part or sentence. If an effect or a part of an effect has a condition, like for example a cost to pay or in Alchemy school an element combination needed to use the enhanced effect, then you skip the whole part of the effect under the 'condition umbrella', if you cannot fulfill the condition.",

"26. [b]Or choice[/b]. No cheating here. If you cannot do or pay the cost for one side of an 'or' choice, you cannot pick that side.",

"27. [b]Preparing spells[/b]. It is an easy rule but sometimes missed by beginners. When you place spells face down on your mage board, you must remember that later on you will flip them over once you reveal the spell to resolve it. The effect you want to happen is the one on the bottom, once the card is prepared face down. When revealing a spell, you do [b]not have a choice[/b] of which side to resolve. Also note that prepared cards are considered to be 'ready'. Only ready cards can be cast. In case of trap or protection spells, casting them means putting a respective token on it to show that they are now active and may be triggered. They are [b]not[/b] ready anymore and cannot be used for momentum.",

"28. [b]Card drawing in the study phase[/b]. Especially for beginners there can be some chaos when drawing cards. Make sure that for drawing and selecting cards you [b]use an area of the table which cannot be confused with your memories or grimoire[/b]. If table space is restricted, people tend to lay down cards in front of them (where usually the mage board is), only to pick up the wrong stack of cards later on. First place your hand cards face down in this separate area. Then draw and add the 2 cards from your grimoire to those hand cards. Now draw the 4 cards from the library and put them in the same separate area, but [b]do not mix them up with your hand cards[/b]! Most likely you will now move forth and back several times between those two stacks (hand cards and 4 library drawn cards) to select 2 of the 4 library drawn cards. Many beginners just draw all those cards to their hand and discard two from their hand afterwards. This is against the rules! You must discard 2 cards from the 4 library cards. For beginners it might be easier, if you just lay down your hand cards and the 4 library cards to the left of them [b]face up[/b]. Don’t worry too much. Only the most veteran players will have time and brain capacity to look across the table to identify your cards. Also make sure that the 2 discarded library cards go to the libraries discard and [b]not[/b] your memories or grimoire. ;)  Remember, it’s just a game. As a [b]house rule for beginners[/b], you may forgo the 2 out of 4 choice and simply draw 2 cards from the library to the hand. You can see how this will reduce a beginning players confusion A LOT. Finally, at the end of the study phase, discard your hand cards down to the hand size limit (the one on your mage card).",

"29. [b]Hand size limit[/b]. Hand size is only [b]checked at the end of the study phase[/b] and you eventually have to [b]discard to the memories[/b] to obey the limit. You can have any number of cards in your hand at any other moment of the game. This is similar to active or completed quests, which are only checked during the Black Rose phase against the quest limit. Also note that [b]discarding is always done to your memories[/b] unless an effect says otherwise. Like [b]drawing is done from your grimoire[/b], unless instructed differently.",

"30. [b]Optional card discarding in the study phase[/b]. Have you ever done this? I did not. During the study phase, you are allowed to choose and discard 1 hand card to the [b]discard of the library[/b] (each school has its own discard pile). Usually the game does not recycle the cards in the memories a lot. This mechanism is used in deck builder games to thin your deck from weak cards. However, BRW is not a deck builder in this traditional sense. In some games players will not even shuffle there memories once to build a new grimoire.",

"31. [b](In)stability spells or now called unstable spells[/b]. If a spell is revealed in order to be resolved, the [b]FIRST[/b] thing you [b]MUST[/b] do is check for 'spell is revealed' triggers and then [b]immediately[/b] apply the (in)stability icon in the middle of the card (if there is any, put one of your cubes in the leftmost empty slot of your room). I cannot count how often this is forgotten or applied 5 actions later 'oh I forgot to do it 10 minutes ago…'. Only then you check for possible other triggers, choose and announce a target, check again for triggers, resolve the spells effect.",

"32. [b]Forgotten spell deck is no school deck[/b]. Really! The only means to draw cards from the forgotten deck is if you are specifically instructed to do so, for example by the Black Rose room. The simple 'draw a spell from the library/school' can [b]never[/b] draw cards from the forgotten spell deck. A few schools or custom spells allow you to draw a forgotten spell, but they state this explicitly.",

"33. [b]Empty decks[/b]. Want to draw a card and the deck is empty? Just shuffle the respective discard pile to form a new deck to draw from.",

"34. [b]Draw and reveal an event[/b]. When done for any reason, card shows the crown symbol, the player who drew the card gets the crown token (but does not yet become start player, only at the beginning of the next phase). ",

"35. [b]Discarding an event due to an effect[/b]. When an effect requires an event card to be discarded, that card must be chosen from those revealed on the event board and placed in the event discard pile. The Black Rose does [b]not[/b] gain the power points for this.",

"36. [b]Do not want to cast a spell?[/b]. According to the rules, you must take all possible actions before you can pass for the game turn. But you can always discard a ready spell for momentum, allowing you to move 0 or 1 instead of casting the spell.",

"37. [b]Defeat itself can be interrupted[/b]. When a mage is defeated, resolution of the current effect is interrupted at the next '.'. There are protection spells which prevent defeat or which heal, leading to preventing the defeat. In case you wonder about the timing: This is checked as first step during a defeat and if applicable, can end defeat resolution right away, leaving the mage eventually undefeated.",

"38. [b]Healing and Converting[/b]. Two basic concepts which are not exactly explained in the rules. Healing basically means that the target may remove the given number of damage cubes. Players have the free choice to which cubes they remove. Avatars remove damage from the right to the left. Converting means to exchange cubes (damage/(in)stability) on a target with cubes from the converting party (mages, Avatar, Black Rose). Again, players are free which cubes to convert and Avatars convert non-black cubes from the right to the left. Remember the immunity rule. A mage cannot convert damage on itself or its evocations. ",

"39. [b]Revenge from the cell[/b]. While you are hanging out in your cell, waiting to punch someone in the face, there are still some tools available to you. You can trigger an active trap while in your cell. Persisting spells still do their effect and you can activate your evocations during the evocation phase while in your cell. [b]Pro tip[/b]: you will very likely land in your cell several times, more so the more players are present. Plan to rebuild one of the rooms next to your cell with PRIORITY right from the start. Also plan a secondary room in reach of a single physical action from your cell. These are easy and very effective points, since you will not waste extra physical actions just to get there. If you have a green room next to your cell, lucky you. The job just got easier. If it is the green room which grants 2 power points once rebuild, then double lucky you.",

"40. [b]Jinx cards[/b]. Yes, they stay in place even when defeated.",

"41. [b]Default drawing and discarding of spells[/b]. It may be redundant, but it is asked often by beginners. By DEFAULT spell cards are drawn from your grimoire and discarded to your memories, UNLESS stated otherwise.",

"42. [b]Dummy target[/b]. This is a confusing one. The purpose for this rule is to provide a way to resolve spells even if there is no model available as a target. This is in line with the overall purpose of BRW to resolve as much as possible from a spell or effect. However, technically you can select a dummy target for your spell even if a real target could be chosen instead. There are some rare cases which could lead to  ‚creative optimization to exploit dummy targets instead of real targets’ and which somewhat goes against the spirit of the game. It is up to you if you want to allow those exploits to be used. Remember that the dummy target does NOT apply to physical actions. Punching the air is not an option. ",

"43. [b]Game end[/b]. Surprising enough, the question regularly occurs. The game ends [b]at the end of the clean-up phase[/b] IF a player or the Black Rose have reached or surpassed the End Game trigger / Black Rose Moon Cube on the Power Board which is by default 30.",

"44. [b]Range[/b]. If an effect shows the room icon (hexagon) with a number in it like Room(N), then this number N defines the range of this effect. Important is that this includes any rooms [b]UP TO[/b] that range. This works exactly the same like for choosing a target for a spell. This is regularly challenged by players, like for example on an Avatar command card: 'Prio 1: Move to Room(2)' does not necessarily mean that you have to move at all. Room(2) includes Room(1) and Room(0) as well as possible options, depending on the Prio 1 given on the Avatar card. Another example is 'inflict 1 damage in each Room(1) from the target'. This includes all rooms at distance 1 but also the room at distance 0 from the target, unless there is a clause on the card excluding a specific room. The same rule applies to Model(N). (N) always defines a range and [b]not[/b] a distance as is defined in the base rules about targeting, unless specified otherwise in the effect. [b]Therefore please note:[/b] 'each adjacent room' is [b]NOT[/b] equal to 'each Room(1)' but instead is equal to 'each Room(1) except Room(0)'.",

"45. [b]Gaea[/b]. There are some misprints and misunderstandings about how the tool/root thing works. If the Avatar Gaea triggers her circle symbol, she places a root in her room if there is no root already there. Then for ALL rooms which have a root in it (and the root still has an empty slot for a cube), you must move the rightmost instability from the regular instability slots onto the leftmost free slot of the root in that room. It is like the roots are soaking up instability from the rooms they are in. Yes, that means if the players do not care about handling the roots, Gaea can win pretty fast. Gaea overall works against instability strategies by soaking up the instability with her roots and she heals quite a bit, working against slow damage inflicting strategies and then she steals power points here and there. Overall this feels a bit like slowing down players progress, unless you utilize other strategies. Attention if you add schools which slow down the game as well like Hex for example. It may start to feel a bit 'slow'.",

"46. [b]Entering a room[/b]. When moving, you do this in a sequence of 'Move 1.' effects. A model with a speed of 2 may 'Move 1.' and may do another 'Move 1.'. It will enter all rooms on its way except for its starting room. If a model is placed in a room, it will only enter that room but not the rooms between its starting and its end position."
		];
	    
        var allschools=[
           			"BRW-R-CORE Rebirth Core: <b>Alchemy</b> Setup: Nigredo <b>Mages:</b> Angela, Bella",
				"BRW-R-CORE Rebirth Core: <b>Agony</b> Setup: Succubus <b>Mages:</b> Rikkart, Bella, Prospero",
				"BRW-R-CORE Rebirth Core: <b>Hex</b> Setup: Jinxes <b>Mages:</b> Gramigna, Alisha, Maelice, Saba",
				"BRW-R-CORE Rebirth Core: <b>Nightmare</b> Setup: Umbra <b>Mages:</b> Baron Doria",
				"BRW-R-CORE Rebirth Core: <b>Shamanic</b> Setup: Totem <b>Mages:</b> Sefu, Dai Jin",
           			"BRW-R-CORE Rebirth Core: <b>Technomancy</b> Setup: Cadaver, Colossus, Upgrades <b>Mages:</b> Arianna, Pyotr, Dai Jin",
				"BRW-R-ROTAS Rebirth ROTAS: <b>Chaos</b> Setup: Madness:  Vastum Tokens, Chaos Effect cards <b>Mages:</b> Landolfo II",
				"BRW-R-ROTAS Rebirth ROTAS: <b>Druid</b> Setup: North Winds: Bjorn/Ursa, Loki/Krokodilus <b>Mages:</b> Kormac, Dai Jin",
				"BRW-R-ROTAS Rebirth ROTAS: <b>Heka</b> Setup: Last Dynasty: Jinxes, Pharaoh; OPTIONAL: Sanctuary of Anubis Room <b>Mages:</b> Imhotep, Saba, Graminga, Maelice",
				"BRW-R-ROTAS Rebirth ROTAS: <b>Oracle</b> Setup: Antiquities: Aruspice <b>Mages:</b> Cassandra, Dai Jin",
				"BRW-R-APO Rebirth Apocalypse: <b>Death</b> Setup: Destiny Tokens <b>Mages:</b> Mors",
				"BRW-R-APO Rebirth Apocalypse: <b>Famine</b> Setup: None <b>Mages:</b> Fames, Bella, Venticello, Irene",
				"BRW-R-APO Rebirth Apocalypse: <b>Pestilence</b> Setup: Pestis and Infectio Tokens, Pestice Evocation cards for all players<b>Mages:</b> Pestilentia, Dai Jin",
				"BRW-R-APO Rebirth Apocalypse: <b>War</b> Setup: Apocalypse Equipments <b>Mages:</b> Bellum, Etns, Venticello, Irene",
				"BRW-R-FORGE Rebirth Dread Forge: <b>Forge</b> Setup: Forge Equipments and Upgrades, Pupa <b>Mages:</b> Angela, Etna",
				"BRW-R-GAEA Rebirth Gaea: <b>Geomancy</b> Setup: None <b>Mages:</b> Talia, Venticello, Irene, Prospero",
				"DUEL-LEX Duel Lex: <b>Lex</b> Setup: Templarii, Lex Upgrades <b>Mages:</b> Bartholomaus, Ulrich, Hogwartz",
				"DUEL-VOID Duel Void: <b>Void</b> Setup: Dagon <b>Mages:</b> Aluce, Alhazred",
				"BRW-CORE BRW Core: <b>Conspiracy</b> Setup: None <b>Mages:</b> Geneve, Corax",
				"BRW-CORE BRW Core: <b>Destruction</b> Setup: Malacoda; OPTIONAL: Summoner Room <b>Mages:</b> Nero, Vivian",
				"BRW-CORE BRW Core: <b>Divination</b> Setup: Divine Altar <b>Mages:</b> Jaf'ar",
				"BRW-CORE BRW Core: <b>Illusion</b> Setup: Andromedar <b>Mages:</b> Marco, Corax, D. Schiavon",
				"BRW-CORE BRW Core: <b>Necromancy</b> Setup: Landsknecht, Bone Knight; OPTIONAL: Cemetary Room <b>Mages:</b> Rebecca, Skultor",
				"BRW-CORE BRW Core: <b>Transmutation</b> Setup: Abomination, Mutant Altar <b>Mages:</b> Tessa",
				"BRW-SATOR BRW SATOR: <b>Bardic</b> Setup: Landsknecht; OPTIONAL: Cemetary Room <b>Mages:</b> Arthur Vox",
				"BRW-SATOR BRW SATOR: <b>Blood</b> Setup: Hashomer and its Action Cards, Poison Tokens <b>Mages:</b> Elizmbra",
				"BRW-SATOR BRW SATOR: <b>Cartomancy</b> Setup: MinoTower, Quest Tokens <b>Mages:</b> Baba Yaga",
				"BRW-SATOR BRW SATOR: <b>Chronomancy</b> Setup: Clockwork Golem <b>Mages:</b> Old Jukas, Telmia",
				"BRW-SATOR BRW SATOR: <b>Demonology</b> Setup: Kappa, Kyuubi no Kitsune, NureOna, Omi, Tengu <b>Mages:</b> Tora, Skultor",
				"BRW-SATOR BRW SATOR: <b>Elementalism</b> Setup: Chantico, Ehecatl, Itztli, Atlaua <b>Mages:</b> Ishuicole, Viviane",
				"BRW-SATOR BRW SATOR: <b>Enchantment</b> Setup: Dancing Blades, SATOR Equipments <b>Mages:</b> Bronte",
				"BRW-SATOR BRW SATOR: <b>Mind</b> Setup: Pigman <b>Mages:</b> Circe",
				"BRW-SATOR BRW SATOR: <b>Omnia</b> Setup: Ichabod the spoiled Cat <b>Mages:</b> Arianna, Bella",
				"BRW-SATOR BRW SATOR: <b>Trickery</b> Setup: Nimbo, Room Infestation Tokens, Bucket Equipment <b>Mages:</b> Dukas, Bella",
				"BRW-SATOR BRW SATOR: <b>Void</b> Setup: Dagon <b>Mages:</b> Howard, Old Jukas",
				"BRW-CRONO BRW Crono: <b>Myth</b> Setup: Disgrace of Crete, SATOR Equipment; OPTIONAL: Medusa <b>Mages:</b> Medusa",
				];

	    	var allmages =[
				"BRW-R-CORE Rebirth: Rikkart",
				"BRW-R-CORE Rebirth: Arianna",
				"BRW-R-CORE Rebirth: Gramigna",
				"BRW-R-CORE Rebirth: Baron Doria",
				"BRW-R-CORE-DM Rebirth Deadly Masks: Seifu",
				"BRW-R-CORE-DM Rebirth Deadly Masks: Angela",
				"BRW-R-ROTAS Rebirth ROTAS Antiquities: Cassandra",
				"BRW-R-ROTAS Rebirth ROTAS Last Dynasty: Imhotep",
				"BRW-R-ROTAS Rebirth ROTAS Last Dynasty: Saba",
				"BRW-R-ROTAS Rebirth ROTAS Madness: Landolfo II",
				"BRW-R-ROTAS Rebirth ROTAS North Winds: Kormac",
				"BRW-R-ROTAS Rebirth ROTAS Once Upon a Time: Hogwartz",	
				"BRW-R-ROTAS Rebirth ROTAS Once Upon a Time: Maelice",	
				"BRW-R-ROTAS Rebirth ROTAS Silk Road: Alisha",	
				"BRW-R-ROTAS Rebirth ROTAS Silk Road: Pyotr",	
				"BRW-R-ROTAS Rebirth ROTAS Silk Road: Dai Jin",	
				"BRW-R-FORGE Rebirth Dread Forge: Etna",
				"BRW-R-GAEA Rebirth Gaea Reborn: Talia",
				"BRW-R-APO Rebirth Apocalypse: Mors",
				"BRW-R-APO Rebirth Apocalypse: Bellum",
				"BRW-R-APO Rebirth Apocalypse: Pestilentia",
				"BRW-R-APO Rebirth Apocalypse: Fames",
				"BRW-R-IRENE Rebirth Apocalypse: Irene",
				"BRW-R-SOF Rebirth Apocalypse: Prospero",
				"DUEL-LEX Duel Lex: Ulrich",
				"DUEL-LEX Duel Lex: Bartholom&auml;us",
				"DUEL-VOID Duel Void: Alhazred",
				"DUEL-VOID Dual Void: Alice",
				"BRW-CORE BRW Core: Nero OG", 
				"BRW-CORE BRW Core: Rebecca OG", 
				"BRW-CORE BRW Core: Tessa OG", 
				"BRW-CORE BRW Core: Jaf'ar OG", 
				"BRW-CORE-HT BRW Hidden Thorns: Geneve OG", 
				"BRW-CORE-HT BRW Hidden Thorns: Marco OG",
				"BRW-SATOR BRW SATOR: Corax",
				"BRW-SATOR BRW SATOR: Dukas",
				"BRW-SATOR BRW SATOR: Vivian",
				"BRW-SATOR BRW SATOR: Bella",
				"BRW-SATOR BRW SATOR: Arianna",
				"BRW-SATOR BRW SATOR: Skultor",
				"BRW-SATOR BRW SATOR: Old Man Jukas",
				"BRW-SATOR BRW SATOR: Eliumbra",
				"BRW-SATOR BRW SATOR: Tlahuicole",
				"BRW-SATOR BRW SATOR: Arthur Vox",
				"BRW-SATOR BRW SATOR: Baba Yaga",
				"BRW-SATOR BRW SATOR: Circe",
				"BRW-SATOR BRW SATOR: Bronte",
				"BRW-SATOR BRW SATOR: Tora",
				"BRW-SATOR BRW SATOR: Howard",
				"BRW-SATOR BRW SATOR: Davide Schiavon",
				"BRW-SATOR BRW SATOR: Telmia",
				"BRW-CRONO BRW Crono: Medusa",
				"ASHES Ashes Magazine: Cosma",
				"ASHES Ashes Magazine: Helblindi",
				"ASHES Ashes Magazine: Slenderman",
				"NA Nova Aetas Crossover: Agorix",
				"NA Nova Aetas Crossover: Boogeyman",
				"NA Nova Aetas Crossover: Onamor",
				"NA Nova Aetas Crossover: Hyperion",
				"NA Nova Aetas Crossover: Mediceo",
				"REQ Requiem Crossover: Istvan",
				"REQ Requiem Crossover: Herick",
				"BRW-REV-CORE Revised Core: Nero REV",
				"BRW-REV-CORE Revised Core: Jafar REV",
				"BRW-REV-CORE Revised Core: Tessa REV",
				"BRW-REV-CORE Revised Core: Rebecca REV",
				"BRW-REV-CORE Revised Core: Marco REV",
				"BRW-REV-CORE Revised Core: Geneve REV",
				"BRW-REV-TENET Revised TENET: Malombra",
				"BRW-REV-TENET Revised TENET: Efialte",
				"BRW-REV-TENET Revised TENET: S'Arzadori",
				"BRW-REV-TENET Revised TENET: Haruka",
				"BRW-REV-TENET Revised TENET: Jukas REV",
				"BRW-REV-TENET Revised TENET: Isadora",
				"BRW-REV-TENET Revised TENET: Elektra",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Anubis",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Architect",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Cacus",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Fenrir",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Gaea",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Hastur",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Jukas CCK",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Ignis",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Minotaurus",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Parcae",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Rubedo",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Janara",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Albedo",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Griphon",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Razvan",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Jack",
				"BRW-REV-CUSTCONV Rebirth Custom Conversion Kit:  Odin",
			];

	    		var allrooms = [
				"BRW-R-CORE (black): Rebirth Core: The Black Rose (black)",
				"BRW-R-GAEA (black): Rebirth Gaea: Black Test 1 (black)",
				"BRW-R-GAEAXXX Rebirth Gaea (black): Black Test 2",	
				"BRW-R-CORE (red): Rebirth Core: Arena (red)",
				"BRW-R-CORE (red): Rebirth Core: Laboratory (red)",
				"BRW-R-CORE (red): Rebirth Core: Summoning Room (red)",
				"BRW-R-CORE (red): Rebirth Core: Red Test (red)",
				"BRW-R-GAEA (green): Rebirth Gaea: Thorny Clearing (green)",	
				"BRW-R-GAEA (green): Rebirth Gaea: Indoor Forrest (green)",	
				"BRW-R-GAEA (green): Rebirth Gaea: Life Fountain (green)",	
			];
	    
		var colors =[
			"red", 
			"blue", 
			"green", 
			"yellow", 
			"white", 
			"purple"
		];

	    	var roomcolors =[
			"black",
			"red", 
			"blue", 
			"green", 
			"yellow", 
			"white", 
			"purple"
		];


	    
	// Show a random Library build from selected BRW boxes
        function displayLibrary(){
            let schools = []; 
	    var mages = [];
		var rooms = [];
            var libraryHTML = "";
            var checkboxes = document.querySelectorAll('input[type=checkbox]:checked')
		
	    // Add schools based on selected BRW boxes
            for (let i = 0; i < allschools.length; i++) {
		for (let j = 0; j < checkboxes.length; j++) {
			if(checkboxes[j].value == allschools[i].split(" ")[0]) {
				schools.push(allschools[i].substring(allschools[i].indexOf(' ') + 1));
			}
		}
            }

		// Remove random schools until only 6 remain
            	while(schools.length > 6) {
                	schools.splice(Math.floor(Math.random()*schools.length), 1);
           	}

		// Show Library as HTML table				
		if(schools.length<6) {
			libraryHTML += "<font color=#FF0000>Select more BRW boxes to choose schools from!</font><p>";
		} else {
			libraryHTML += "<b>The Black Rose came up with this Library for you:</b><p>";
			libraryHTML += "<div style='padding-left:20px;'><table><tr><th align=left width=165>BOX</th><th align=left width=135>SCHOOL</th><th align=left>SETUP</th></tr>";
            		for (let i = 0; i < schools.length; i++) {
				schools[i] = schools[i].replace("Setup: ","</td><td>");
				schools[i] = schools[i].replace(": <b>"," </td><td><b>");
                 		libraryHTML += "<tr><td>" + schools[i] + "</td></tr>";
            		}
			libraryHTML += "</table><p>";
		}

		// start player
		shuffleArray(colors);
		libraryHTML += "<b>Start player: </b>";
		for (let i = 0; i < colors.length; i++) {
			if(i!=0) libraryHTML += " &gt; ";
			libraryHTML += "<span style='color: " + colors[i] + ";background-color: #aaaaaa;'>" + colors[i] + "</span>";
		}
		libraryHTML += "<p>";

		// Random mages
		libraryHTML += "<b>Random Mages:</b> Either draft them or assign them in the order of schools or players from above.<br>";

		// Select mages from selected boxes
            for (let i = 0; i < allmages.length; i++) {
		for (let j = 0; j < checkboxes.length; j++) {
			if( allmages[i].split(" ")[0] == checkboxes[j].value ) {
				mages.push(allmages[i].substring(allmages[i].indexOf(':') + 1));
			}
		}
            }
		
		// Remove random mage until only 6 remain
            	while(mages.length > 6) {
                	mages.splice(Math.floor(Math.random()*mages.length), 1);	
           	}
		shuffleArray(mages);

		// Show mages			
		if(mages.length<6) {
			libraryHTML += "<font color=#FF0000>Select more BRW boxes to provide at least 6 mages!</font>";
		} else {
			for (let i = 0; i < mages.length; i++) {
                 		libraryHTML += "<b>" + mages[i] + "</b>";
				if(i!=mages.length-1) libraryHTML += ", ";
            		}
		}		
		
		libraryHTML += "<p>";

		
		// Random rooms
		libraryHTML += "<b>SOON - Random Rooms:</b> Testing...<br>";

		// Select rooms from selected boxes
            	for (let i = 0; i < allrooms.length; i++) {
			for (let j = 0; j < checkboxes.length; j++) {
				if( allrooms[i].split(" ")[0] == checkboxes[j].value ) {
					rooms.push(allrooms[i].substring(allrooms[i].indexOf('(') + 1));
				}
			}
            	}

		// Remove random rooms until only 1 boack and 3 of each color remain
		var rc=0;
		var delroom=0;
		var foundrooms=0;
            	for (let i = 0; i < roomcolors.length; i++) {
		    do {
			rc=0;
			for (let j = 0; j < rooms.length; j++) {
				if( rooms[j].split(")")[0] == roomcolors[i] ) rc++;
			}
			if( (roomcolors[i] == "black" && rc > 1) || (roomcolors[i] != "black" && rc > 3) ) {
				delroom = Math.floor(Math.random()*rc)+1;
				foundrooms=0;
				for (let j = 0; j < rooms.length; j++) {
					if( rooms[j].split(")")[0] == roomcolors[i] ) {
						foundrooms++;
						if( foundrooms == delroom ) {
							rooms.splice(j, 1);
							rc--;
						}
					}
				}
			}
		    } while ( (roomcolors[i] == "black" && rc > 1) || (roomcolors[i] != "black" && rc > 3) );
		}
		
		// Output rooms
		if(rooms.length<1) {
			libraryHTML += "<font color=#FF0000>Select more BRW boxes to provide at least 19 tooms!</font>";
		} else {
			libraryHTML += "<table><tr><th align=left width=165>BOX</th><th align=left width=135>ROOM</th></tr>";
			for (let i = 0; i < rooms.length; i++) {
				libraryHTML += "<tr><td>";
                 		libraryHTML += rooms[i].split(":")[0];
				libraryHTML += "</td><td>";
				libraryHTML += "<b>" + rooms[i].split(":")[1].substring(1) + "</b>";
				libraryHTML += "</td></tr>";
				// if(i!=rooms.length-1) libraryHTML += ", ";
            		}
			libraryHTML += "</table>";
		}		
		
		libraryHTML += "<p>";
		libraryHTML += "</div><p>";

            document.getElementById("result").innerHTML = libraryHTML;
        }

	    function ruleTip() {
		    var libraryHTML = "";

		    	// Rule tip
			libraryHTML += "<b>Rebirth rule tip "; 
			libraryHTML += rules[Math.floor(Math.random()*rules.length)].replaceAll("[b]","<b>").replaceAll("[/b]","</b>").replace("</b>. ","</b><p><div style='padding-left:20px;'><font color=#000099>").replace(".",":</b>");
			libraryHTML += "</font></div><p>";
		    
		  	document.getElementById("result").innerHTML = libraryHTML;
	    }

	function shuffleArray(array) {
   		 for (let i = array.length - 1; i > 0; i--) {
       			 const j = Math.floor(Math.random() * (i + 1));
        		[array[i], array[j]] = [array[j], array[i]];
   		 }
	}

    </script>

    <body onload="ruleTip()">
			<h1>Black Rose Wars - Random Library</h1> 
        	<div id="result">
        	</div>
			<b>Select the core boxes and expansions to build your Library:</b><p>
	<div style='padding-left:20px;'>
	<table><tr><td VALIGN=TOP> 
			<input type="checkbox" id="BRW-R-CORE" name="BRW-R-CORE" value="BRW-R-CORE" checked>
         <label for="BRW-R-CORE"> Rebirth Core</label><br>

			<input type="checkbox" id="BRW-R-ROTAS" name="BRW-R-ROTAS" value="BRW-R-ROTAS" checked>
         <label for="BRW-R-ROTAS"> Rebirth ROTAS</label><br>
		
			<input type="checkbox" id="BRW-R-CORE-DM" name="BRW-R-CORE-DM" value="BRW-R-CORE-DM" checked>
         <label for="BRW-R-CORE-DM"> Deadly Masks</label><br>

			<input type="checkbox" id="BRW-R-IRENE" name="BRW-R-IRENE" value="BRW-R-IRENE">
         <label for="BRW-R-IRENE"> Irene’s Quest</label><br>
		
			<input type="checkbox" id="BRW-R-APO" name="BRW-R-APO" value="BRW-R-APO">
         <label for="BRW-R-APO"> Rebirth Apocalypse</label><br>

			<input type="checkbox" id="BRW-R-FORGE" name="BRW-R-FORGE" value="BRW-R-FORGE">
         <label for="BRW-R-FORGE"> Rebirth Dread Forge</label><br>

			<input type="checkbox" id="BRW-R-SOF" name="BRW-R-SOF" value="BRW-R-SOF">
         <label for="BRW-R-SOF"> Seal of Fire</label><br>

			<input type="checkbox" id="BRW-R-GAEA" name="BRW-R-GAEA" value="BRW-R-GAEA">
         <label for="BRW-R-GAEA"> Rebirth Gaea</label><br>
	</td><td VALIGN=TOP>
			<input type="checkbox" id="DUEL-LEX" name="DUEL-LEX" value="DUEL-LEX">
         <label for="DUEL-LEX"> Duel Lex</label><br>

			<input type="checkbox" id="DUEL-VOID" name="DUEL-VOID" value="DUEL-VOID">
         <label for="DUEL-VOID"> Duel Void</label><p>

			<input type="checkbox" id="BRW-CORE" name="BRW-CORE" value="BRW-CORE">
         <label for="BRW-CORE"> BRW Core (OG)</label><br>

			<input type="checkbox" id="BRW-SATOR" name="BRW-SATOR" value="BRW-SATOR">
         <label for="BRW-SATOR"> BRW SATOR</label><br>
		
			<input type="checkbox" id="BRW-CORE-HT" name="BRW-CORE-HT" value="BRW-CORE-HT">
         <label for="BRW-CORE-HT"> BRW Hidden Thorns</label><br>
		
			<input type="checkbox" id="BRW-CRONO" name="BRW-CRONO" value="BRW-CRONO">
         <label for="BRW-CRONO"> BRW Crono</label><br>
	</td><td VALIGN=TOP>
		 	<input type="checkbox" id="ASHES" name="ASHES" value="ASHES">
         <label for="ASHES"> Ashes Magazine</label><br>

		 	<input type="checkbox" id="NA" name="NA" value="NA">
         <label for="NA"> Nova Aetas Crossover</label><br>
		 
		 	<input type="checkbox" id="REQ" name="REQ" value="REQ">
         <label for="REQ"> Requiem Crossover</label><p>

		 	<input type="checkbox" id="BRW-REV-CORE" name="BRW-REV-CORE" value="BRW-REV-CORE">
         <label for="BRW-REV-CORE"> Revised Core (REV)</label><br>

		 	<input type="checkbox" id="BRW-REV-TENET" name="BRW-REV-TENET" value="BRW-REV-TENET">
         <label for="BRW-REV-TENET"> Revised TENET</label><p>

			<input type="checkbox" id="BRW-REV-CUSTCONV" name="BRW-REV-CUSTCONV" value="BRW-REV-CUSTCONV">
         <label for="BRW-REV-CUSTCONV"> Revised Custom Conversion Kit (CCK)</label><br> 
		 

	</td></tr></table>
	
         <p>
        	<button onclick="displayLibrary()">Get me my random Library!</button><p>
	</div>

			<hr><p>
			<b>A ton of helpful or even essential material and information for BRW Rebirth created by me:</b><br>
			<ul>
			<li><a href="https://boardgamegeek.com/thread/3231567/torns-brwr-overview-and-other-useful-files-german">TORN's BRW Rebirth overview and many useful files (German / English)</a></li>
			
			<li><a href="https://boardgamegeek.com/thread/3480476/46-rules-you-may-have-missed-in-brw-rebirth">46 rules you may have missed in BRW Rebirth</a></li>
			
			<li><a href="https://boardgamegeek.com/thread/3263754/strength-and-complexity-of-schools">Strength and complexity of BRW Rebirth schools</a></li>
			</ul>
				
			<p>Content & programmed by TORN@BGG

    </body>
</html>
